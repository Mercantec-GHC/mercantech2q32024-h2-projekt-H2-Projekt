@page "/roomtest"
@using DomainModels.DTO
@inject HttpClient Http

<h3>Room Details</h3>

@if (roomDetails == null)
{
    <p>Loading...</p>
}
else if (apiError)
{
    <p>Error loading room details. Please try again later.</p>
}
else
{
    <div>
        <p>Room Number: @roomDetails.RoomNumber</p>
        <p>Beds: @roomDetails.Beds</p>
        <p>Price: @roomDetails.Price.ToString("C")</p>
        <p>Status: @roomDetails.Status</p>
        <p>Condition: @roomDetails.Condition</p>
    </div>
}

@code {
    private GetRoomDetailsDTO? roomDetails; // Made nullable
    private bool apiError = false;

    // Method to request data from the endpoint
    protected override async Task OnInitializedAsync()
    {
        try
        {
            roomDetails = await Http.GetFromJsonAsync<GetRoomDetailsDTO>("https://localhost:7207/RoomDetailsEndpoint/GetRoomDetails/3");
        }
        catch (Exception)
        {
            apiError = true;
        }
    }
}
