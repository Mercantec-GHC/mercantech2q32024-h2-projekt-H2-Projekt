@page "/room-details"
@using DomainModels
@using System.Globalization
@using System.Diagnostics
@attribute [Authorize]
@using Microsoft.AspNetCore.Authorization
@inject HttpClient Http
@inject NavigationManager navManager
@using Microsoft.JSInterop
@inject IJSRuntime jsRuntime
@inject AppState AppState



<h1>Room Details</h1>


@if (rooms == null)
{
    <p>Loading...</p>
}
else
{

<h3>Standart Room</h3>
<p>
    Welcome to our cozy and well-appointed rooms designed to make your stay comfortable and enjoyable.
    Whether you choose a single or double room, each space is equipped with modern amenities to suit your needs.
    Each room features either a single or double bed, ensuring a restful night's sleep.
    The ensuite bathroom includes a refreshing shower, providing convenience and privacy.
    For entertainment and relaxation, you'll find a TV where you can unwind after a day of exploring.
    A functional workspace with a desk is also available for those who need to catch up on work or correspondence.
    Stay connected with complimentary Wi-Fi throughout the premises, allowing you to keep in touch or plan your next adventure.
    Our accommodation offers 10 single rooms and 10 double rooms, each designed with your comfort in mind.
    Whether you're traveling solo or with a companion, our rooms provide a welcoming retreat at affordable rates:
   
    <div class="carousel-container">
        <div class="carousel-text">
            <div class="room-price">
                <span>Single room: @PriseSingleStandart @Curency.ToUpper() per night</span>
            </div>

        </div>
        <div class="carousel-images">
            <Carousel Autoplay="false">
                <CarouselSlide Name="1">
                    <Image Source="/Pictures/Trinity hotel.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
                <CarouselSlide Name="2">
                    <Image Source="/Pictures/Standart Single (2).jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
            </Carousel>
        </div>
    </div>

    
    <div class="carousel-container">
        <div class="carousel-text">
            <div class="room-price">
                <span>Double room: @PriseDoubleStandart @Curency.ToUpper() per night</span>
            </div>

        </div>
        <div class="carousel-images">
            <Carousel Autoplay="false">
                <CarouselSlide Name="1">
                    <Image Source="/Pictures/Standart Double.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
                <CarouselSlide Name="2">
                    <Image Source="/Pictures/Standart Double (2).jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
            </Carousel>
        </div>
    </div>



    Experience convenience, comfort, and affordability in every aspect of your stay with us. We look forward to welcoming you to our charming rooms where relaxation meets practicality.
</p>

<h3>Premium Rooms</h3>

<p>
    Welcome to our Premium Rooms, where luxury and comfort blend seamlessly to create an unforgettable stay. Whether you select a single or double room, each space is thoughtfully designed with high-end amenities to elevate your experience.

    Our Premium Rooms feature a plush double bed for the ultimate in relaxation. The ensuite bathroom is equipped with both a bathtub and a shower, offering you the choice of a soothing soak or a quick refresh. Entertainment is at your fingertips with a TV, while a dedicated workspace with a desk provides the perfect spot for any tasks you need to tackle. A well-stocked minibar is available for your convenience, allowing you to enjoy refreshments in the privacy of your room. Stay connected with complimentary Wi-Fi, and step out onto your private balcony to enjoy some fresh air and scenic views.

    We offer 10 double rooms and 5 single rooms in our Premium category, each designed to provide a superior level of comfort and style. Whether you're traveling alone or with a partner, our Premium Rooms offer an exclusive retreat at competitive rates:
   
    <div class="carousel-container">
        <div class="carousel-text">

            <div class ="room-price">
                    <span>Single room: @PriseSinglePremium @Curency.ToUpper() per night</span>
                </div>
           
        </div>
        <div class="carousel-images">
            <Carousel Autoplay="false">
                <CarouselSlide Name="1">
                    <Image Source="/Pictures/Premium Single.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
                <CarouselSlide Name="2">
                    <Image Source="/Pictures/PremiumSingle.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
            </Carousel>
        </div>
    </div>
   
    <div class="carousel-container">
        <div class="carousel-text">
            
                <div class="room-price">
                    <span>Double room: @PriseDoublePremium @Curency.ToUpper() per night</span>
                </div>
            
        </div>
        <div class="carousel-images">
            <Carousel Autoplay="false">
                <CarouselSlide Name="1">
                    <Image Source="/Pictures/Premium Double.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
                <CarouselSlide Name="2">
                    <Image Source="/Pictures/PremiumDouble.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
            </Carousel>
        </div>
    </div>

    Indulge in the finer things during your stay and enjoy the sophisticated ambiance of our Premium Rooms, where every detail is tailored to enhance your comfort.
</p>

<h3>Penthouse Suites</h3>

<p>
   
    <div class="carousel-container">
        <div class="carousel-text">
            <p>
                Welcome to the pinnacle of luxury with our exclusive Penthouse Suites, where every detail is crafted to provide an unparalleled experience. These lavish suites are designed for those who seek the highest level of comfort and sophistication during their stay.

                Each Penthouse Suite features a grand king-size bed, promising a night of restful sleep in an opulent setting. The expansive bathroom is equipped with both a luxurious bathtub and a separate shower, allowing you to unwind in style. The suite includes a spacious living area, perfect for relaxing or entertaining guests. Stay entertained with a state-of-the-art TV, and if work calls, a well-appointed desk is available for your convenience. The minibar offers a selection of premium beverages, while complimentary Wi-Fi keeps you connected throughout your stay.

                One of the standout features of our Penthouse Suites is the private terrace, offering stunning views and a perfect spot to enjoy the outdoors in complete privacy.

                All our Penthouse Suites come with the same exquisite amenities, ensuring a consistent experience of luxury.
                <div class="room-price">
                    <span>Penthouse: @PrisePenthouse @Curency.ToUpper() per night</span>
                </div>
                Experience the ultimate in luxury and comfort in our Penthouse Suites, where every moment is elevated by the exceptional surroundings and top-tier amenities.
            </p>
        </div>
        <div class="carousel-images">
            <Carousel Autoplay="false">
                <CarouselSlide Name="1">
                    <Image Source="/Pictures/Penthouse.jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
                <CarouselSlide Name="2">
                    <Image Source="/Pictures/Penthouse (2).jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
                <CarouselSlide Name="3">
                    <Image Source="/Pictures/Penthouse (3).jpg" Text="" Display="Display.Block" Class="carousel-image" />
                </CarouselSlide>
            </Carousel>
        </div>
    </div>
   
</p>

}



@code {
    private List<Room> rooms;  // Holds room data from the API
    private int PriseSingleStandart = 0;
    private int PriseDoubleStandart = 0;
    private int PriseSinglePremium = 0;
    private int PriseDoublePremium = 0;
    private int PrisePenthouse = 0;
    private string Curency = "DKK";

    protected override async Task OnInitializedAsync()
    {
        await GetAllRoomTypes();
    }

    async Task GetAllRoomTypes()
    {
        try
        {
            // Fetch room data from API
            rooms = await Http.GetFromJsonAsync<List<Room>>("api/Rooms");

            // Map room prices based on the room type
            foreach (var room in rooms)
            {
                switch (GetRoomTypeString(room.Type))
                {
                    case "standard single":
                        PriseSingleStandart = room.Price;
                        break;
                    case "standard double":
                        PriseDoubleStandart = room.Price;
                        break;
                    case "premium single":
                        PriseSinglePremium = room.Price;
                        break;
                    case "premium double":
                        PriseDoublePremium = room.Price;
                        break;
                    case "penthouse":
                        PrisePenthouse = room.Price;
                        break;
                }
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine($"Error fetching room data: {ex.Message}");
        }
    }

    // Helper function to map room type from int to string
    private string GetRoomTypeString(int type)
    {
        return type switch
        {
            1 => "standard single",
            2 => "standard double",
            3 => "premium single",
            4 => "premium double",
            5 => "penthouse",
            _ => "unknown"
        };
    }
}